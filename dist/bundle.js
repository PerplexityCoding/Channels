!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.Channels=e()}(this,function(){"use strict";var n=function(){function n(){}return n.prototype.on=function(e,t){var r={id:n.handlerIdCpt++,cb:t};n.handlersById[r.id]=r;var o=n.handlersByMessage[e];return o||(o=[],n.handlersByMessage[e]=o),o.push(r.id),r.id},n.prototype.emit=function(e,t){var r=n.handlersByMessage[e];if(null!=r)for(var o,l=function(e){var l=r[e],u=n.handlersById[l];u?setTimeout(function(){u.cb(t)},0):(r.splice(e,1),e--),o=e},u=0;u<r.length;u++)l(u),u=o;return null!=r&&r.length>0},n.prototype.off=function(e){return null!=n.handlersById[e]&&(delete n.handlersById[e],!0)},n.handlerIdCpt=0,n.handlersById={},n.handlersByMessage={},n}();return function(){function e(){}return e.on=function(n,t){return e.globalChannel.on(n,t)},e.emit=function(n,t){return e.globalChannel.emit(n,t)},e.off=function(n){return e.globalChannel.off(n)},e.get=function(t){var r=e.channels,o=r[t];return o||(o=new n,r[t]=o),o},e.remove=function(n){var t=e.channels;return!!t[n]&&(delete t[n],!0)},e.channels=[],e.globalChannel=new n,e}()});
