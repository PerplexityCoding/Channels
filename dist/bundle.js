!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.Channels=e()}(this,function(){"use strict";var n=function(){function n(n,e){this.handlersById={},this.handlersByMessage={},this.Channels=n,this.name=e}return n.prototype.on=function(e,t){var r={id:n.handlerIdCpt++,cb:t};this.handlersById[r.id]=r;var o=this.handlersByMessage[e];return o||(o=[],this.handlersByMessage[e]=o),o.push(r.id),r.id},n.prototype.emit=function(n,e){var t=this.handlersByMessage[n];if(null!=t)for(var r=0;r<t.length;r++){var o=t[r],i=this.handlersById[o];i?function(n){setTimeout(function(){n.cb(e)},0)}(i):(t.splice(r,1),r--)}return null!=t&&t.length>0},n.prototype.off=function(n){return null!=this.handlersById[n]&&(delete this.handlersById[n],!0)},n.prototype.remove=function(){return this.Channels.remove(this.name)},n.handlerIdCpt=0,n}();return function(){function e(){}return e.on=function(n,t){return e.globalChannel.on(n,t)},e.emit=function(n,t){return e.globalChannel.emit(n,t)},e.off=function(n){return e.globalChannel.off(n)},e.get=function(t){var r=e.channels,o=r[t];return o||(o=new n(e,t),r[t]=o),o},e.remove=function(n){var t=e.channels;return!!t[n]&&(delete t[n],!0)},e.channels=[],e.globalChannel=new n(e,"__GLOBAL"),e}()});
